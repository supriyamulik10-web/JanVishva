{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Supriya/OneDrive/Desktop/JanVishva/janvishwa/app/onboarding/individual/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useUser } from '@clerk/nextjs'\r\n\r\nexport default function IndividualOnboarding() {\r\n  const { user, isSignedIn, isLoaded } = useUser()\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState('')\r\n  const [formData, setFormData] = useState({\r\n    phone: '',\r\n    address: '',\r\n    city: '',\r\n    state: '',\r\n    pincode: '',\r\n    skills: [] as string[],\r\n    interests: [] as string[]\r\n  })\r\n\r\n  const skillOptions = ['Teaching', 'Healthcare', 'Technology', 'Marketing', 'Finance', 'Legal', 'Construction', 'Arts']\r\n  const interestOptions = ['Education', 'Healthcare', 'Environment', 'Poverty Alleviation', 'Women Empowerment', 'Child Welfare']\r\n\r\n  useEffect(() => {\r\n    console.log('Onboarding - isLoaded:', isLoaded, 'isSignedIn:', isSignedIn)\r\n    if (!isLoaded) return\r\n    \r\n    if (!isSignedIn) {\r\n      console.log('Not signed in, redirecting to sign-in')\r\n      router.push('/sign-in')\r\n      return\r\n    }\r\n    \r\n    setLoading(false)\r\n  }, [isLoaded, isSignedIn, router])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!user) {\r\n      setError('User not found. Please sign in again.')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setError('')\r\n    \r\n    console.log('Submitting onboarding data...')\r\n    \r\n    try {\r\n      const payload = {\r\n        clerkUserId: user.id,\r\n        email: user.emailAddresses?.[0]?.emailAddress || '',\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        ...formData\r\n      }\r\n      \r\n      console.log('Payload:', payload)\r\n\r\n      const res = await fetch('/api/onboarding/individual', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      })\r\n\r\n      console.log('Response status:', res.status)\r\n      const data = await res.json()\r\n      console.log('Response data:', data)\r\n\r\n      if (res.ok && data.success) {\r\n        console.log('Profile saved successfully, redirecting to dashboard...')\r\n        // Force a hard redirect to ensure dashboard loads fresh data\r\n        window.location.href = '/dashboard'\r\n      } else {\r\n        setError(data?.error || data?.details || 'Failed to save profile.')\r\n        setLoading(false)\r\n      }\r\n    } catch (err) {\r\n      console.error('Error submitting form:', err)\r\n      setError('Failed to save profile. Please try again.')\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const toggleArrayItem = (array: string[], item: string) =>\r\n    array.includes(item) ? array.filter(i => i !== item) : [...array, item]\r\n\r\n  if (!isLoaded || (loading && !error)) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4\">\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <div className=\"bg-white rounded-2xl shadow-lg p-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Complete Your Profile</h1>\r\n          <p className=\"text-gray-600 mb-8\">Help us personalize your JanVishva experience</p>\r\n\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-800 text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Phone Number</label>\r\n              <input\r\n                type=\"tel\"\r\n                value={formData.phone}\r\n                onChange={(e) => setFormData({...formData, phone: e.target.value})}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"+91 1234567890\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Address</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.address}\r\n                onChange={(e) => setFormData({...formData, address: e.target.value})}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"Street address\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">City</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.city}\r\n                  onChange={(e) => setFormData({...formData, city: e.target.value})}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"Pune\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">State</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.state}\r\n                  onChange={(e) => setFormData({...formData, state: e.target.value})}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"Maharashtra\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pincode</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.pincode}\r\n                onChange={(e) => setFormData({...formData, pincode: e.target.value})}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"411001\"\r\n                maxLength={6}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your Skills (Select all that apply)</label>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                {skillOptions.map(skill => (\r\n                  <button\r\n                    key={skill}\r\n                    type=\"button\"\r\n                    onClick={() => setFormData({...formData, skills: toggleArrayItem(formData.skills, skill)})}\r\n                    className={`px-4 py-2 rounded-lg border-2 transition-colors ${\r\n                      formData.skills.includes(skill)\r\n                        ? 'border-orange-500 bg-orange-50 text-orange-700'\r\n                        : 'border-gray-200 hover:border-orange-300'\r\n                    }`}\r\n                  >\r\n                    {skill}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Interests (Causes you care about)</label>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                {interestOptions.map(interest => (\r\n                  <button\r\n                    key={interest}\r\n                    type=\"button\"\r\n                    onClick={() => setFormData({...formData, interests: toggleArrayItem(formData.interests, interest)})}\r\n                    className={`px-4 py-2 rounded-lg border-2 transition-colors ${\r\n                      formData.interests.includes(interest)\r\n                        ? 'border-green-500 bg-green-50 text-green-700'\r\n                        : 'border-gray-200 hover:border-green-300'\r\n                    }`}\r\n                  >\r\n                    {interest}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full py-3 bg-gradient-to-r from-orange-500 to-green-500 text-white rounded-xl hover:from-orange-600 hover:to-green-600 font-semibold transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? 'Saving...' : 'Complete Registration'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}